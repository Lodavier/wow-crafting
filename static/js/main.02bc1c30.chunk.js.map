{"version":3,"sources":["nexushub.js","data.js","logic.js","App.js","index.js"],"names":["serverList","fetch","then","r","json","dataCache","loadData","server","faction","slug","Promise","all","alliance","horde","keys","Set","Object","fromEntries","map","key","a","h","quantity","marketValue","Math","min","data","itemId","assign","crafting","quests","process","item","results","Error","info","Data","id","quality","vendor","vendorPrice","category","reagents","requiredMoney","amountCrafted","craftMin","craftMax","craftingPrice","entries","reduce","total","name","bindOnPickup","price","Infinity","filter","x","isNaN","forEach","n","usePersistentState","initialValue","React","useState","window","localStorage","getItem","JSON","parse","error","console","value","setValue","useEffect","setItem","stringify","serverOptions","servers","regions","region","push","label","list","sort","name1","name2","localeCompare","options","factionOptions","profNames","alchemy","blacksmithing","cooking","enchanting","engineering","firstaid","leatherworking","mining","tailoring","jewelcrafting","categoryNames","quest","tierset","itemOptions","term","callback","length","toLowerCase","categories","includes","cat","Money","isFinite","gold","floor","silver","copper","className","itemDefault","itemPrice","overrides","stack","recursion","reagent","mode","profLabel","shoppingList","count","numCraft","ceil","money","ItemLink","href","target","rel","ResultView","props","setOverrides","setShopping","setMarket","useCallback","ov","setCrafting","addShopping","s","Fragment","cprice","onClick","ShoppingItem","onChange","e","parseInt","type","ShoppingList","shopping","useMemo","cur","p","p1","s1","p2","s2","clearList","App","setServerList","opt","setServer","setFaction","setResults","onServerChange","v","onFactionChange","onItemChange","toCalc","useRef","current","calculate","placeholder","loadOptions","noOptionsMessage","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.02bc1c30.chunk.js","sourcesContent":["export const serverList = fetch('https://api.nexushub.co/wow-classic/v1/servers/full/').then(r => r.json());\r\n\r\nconst dataCache = {};\r\n\r\nfunction merge(a, h) {\r\n  if (a && h) {\r\n    return {quantity: a.quantity + h.quantity, marketValue: Math.min(a.marketValue, h.marketValue), faction: a.marketValue < h.marketValue ? \"alliance\" : \"horde\"};\r\n  } else if (a) {\r\n    return {...a, faction: \"alliance\"};\r\n  } else if (h) {\r\n    return {...h, faction: \"horde\"};\r\n  }\r\n}\r\n\r\nexport function loadData(server, faction) {\r\n  const slug = `${server}-${faction}`;\r\n  if (dataCache[slug]) return dataCache[slug];\r\n  if (faction === \"both\") {\r\n    return dataCache[slug] = Promise.all([loadData(server, \"alliance\"), loadData(server, \"horde\")]).then(([alliance, horde]) => {\r\n      const keys = new Set([...Object.keys(alliance), ...Object.keys(horde)]);\r\n      return Object.fromEntries([...keys].map(key => [key, merge(alliance[key], horde[key])]));\r\n    });\r\n  } else {\r\n    return dataCache[slug] = fetch(`https://api.nexushub.co/wow-classic/v1/items/${slug}/`)\r\n      .then(r => r.json())\r\n      .then(r => Object.fromEntries(r.data.map(({itemId, quantity, marketValue}) => [itemId, {quantity, marketValue}])));\r\n  }\r\n}\r\n","import crafting from './crafting.json';\r\nimport quests from './quests.json';\r\n\r\nObject.assign(crafting, quests);\r\n\r\nexport default crafting;\r\n","import { loadData } from './nexushub';\r\nimport Data from './data';\r\n\r\nexport default async function calculate(server, faction) {\r\n  const data = await loadData(server, faction);\r\n\r\n  const price = r => Math.min(...[r.vendorPrice, r.marketValue, r.craftingPrice, r.bindOnPickup ? 0 : Infinity].filter(x => !isNaN(x)));\r\n\r\n  const results = {};\r\n  function process(item) {\r\n    if (results[item] === \"processing\") throw Error(`cyclical dependency for ${item}`);\r\n    if (!results[item]) {\r\n      const info = Data[item];\r\n      if (!info) {\r\n        throw Error(`item not found: ${item}`);\r\n      }\r\n      const r = results[item] = {};\r\n      r.id = info.id;\r\n      r.quality = info.quality;\r\n      if (info.id && data[info.id]) {\r\n        Object.assign(r, data[info.id]);\r\n      }\r\n      if (info.vendor) {\r\n        r.vendorPrice = info.vendor;\r\n      }\r\n      r.category = info.category;\r\n      if (info.reagents) {\r\n        r.crafting = info.reagents;\r\n        r.requiredMoney = info.requiredMoney || 0;\r\n        r.amountCrafted = ((info.craftMin || 1) + (info.craftMax || 1)) / 2;\r\n        r.craftMin = info.craftMin || 1;\r\n        r.craftingPrice = Object.entries(r.crafting).reduce((total, [name, quantity]) => total + process(name) * quantity, r.requiredMoney) / r.amountCrafted;\r\n      } else if (info.bindOnPickup) {\r\n        r.bindOnPickup = true;\r\n      }\r\n    }\r\n    return price(results[item]);\r\n  }\r\n  Object.keys(Data).forEach(n => process(n));\r\n  return results;\r\n}\r\n","import React from 'react';\r\nimport './App.scss';\r\n\r\nimport Select from 'react-select';\r\nimport AsyncSelect from 'react-select/async';\r\n\r\nimport { serverList } from './nexushub';\r\n\r\nimport Data from './data';\r\nimport calculate from './logic';\r\n\r\nfunction usePersistentState(key, initialValue) {\r\n  const [value, setValue] = React.useState(() => {\r\n    try {\r\n      const item = window.localStorage.getItem(key);\r\n      return item != null ? JSON.parse(item) : initialValue;\r\n    } catch (error) {\r\n      console.error(error);\r\n      return initialValue;\r\n    }\r\n  });\r\n  React.useEffect(() => {\r\n    try {\r\n      window.localStorage.setItem(key, JSON.stringify(value));\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }, [key, value]);\r\n  return [value, setValue];\r\n}\r\n\r\nconst serverOptions = serverList.then(servers => {\r\n  const regions = {};\r\n  servers.forEach(({slug, name, region}) => {\r\n    if (!regions[region]) regions[region] = [];\r\n    regions[region].push({value: slug, label: name});\r\n  });\r\n  return Object.entries(regions).map(([region, list]) => {\r\n    list.sort(({label: name1}, {label: name2}) => name1.localeCompare(name2));\r\n    return {label: region, options: list};\r\n  });\r\n});\r\n\r\nconst factionOptions = [\r\n  {value: \"alliance\", label: \"Alliance\"},\r\n  {value: \"horde\", label: \"Horde\"},\r\n  {value: \"both\", label: \"Both\"},\r\n];\r\n\r\nconst profNames = {\r\n  alchemy: \"Alchemy\", \r\n  blacksmithing: \"Blacksmithing\", \r\n  cooking: \"Cooking\", \r\n  enchanting: \"Enchanting\", \r\n  engineering: \"Engineering\", \r\n  firstaid: \"First Aid\", \r\n  leatherworking: \"Leatherworking\", \r\n  mining: \"Mining\",\r\n  tailoring: \"Tailoring\",\r\n  jewelcrafting: \"Jewelcrafting\"\r\n};\r\nconst categoryNames = {...profNames, quest: \"Quests\", tierset: \"Tier Sets\", \"\": \"Misc\"};\r\n\r\nconst itemOptions = (term, callback) => {\r\n  if (term.length < 3) callback([]);\r\n  term = term.toLowerCase();\r\n  const categories = {};\r\n  Object.entries(Data).filter(([name, data]) => data.reagents && name.toLowerCase().includes(term)).forEach(([name, data]) => {\r\n    categories[data.category || \"\"] = (categories[data.category || \"\"] || []);\r\n    categories[data.category || \"\"].push({value: name, label: name});\r\n  });\r\n  callback(Object.entries(categories).map(([cat, list]) => ({label: categoryNames[cat], options: list})));\r\n}\r\n\r\nfunction Money({value}) {\r\n  if (!isFinite(value)) {\r\n    return \"Not available\";\r\n  }\r\n  if (!value) {\r\n    return \"0\";\r\n  }\r\n  const gold = Math.floor(value / 10000);\r\n  const silver = Math.floor(value / 100) % 100;\r\n  const copper = Math.floor(value) % 100;\r\n  return (\r\n    <span>\r\n      {gold !== 0 && <span className=\"money-gold\">{gold}</span>}{gold !== 0 && (silver + copper) !== 0 && \" \"}\r\n      {silver !== 0 && <span className=\"money-silver\">{silver}</span>}{silver !== 0 && copper !== 0 && \" \"}\r\n      {copper !== 0 && <span className=\"money-copper\">{copper}</span>}\r\n    </span>\r\n  );\r\n}\r\n\r\nfunction itemDefault(results, item) {\r\n  const data = results[item];\r\n  if (!data) {\r\n    debugger;\r\n  }\r\n  if (!isNaN(data.craftingPrice) && (!data.marketValue || data.craftingPrice < data.marketValue)) {\r\n    return \"crafting\";\r\n  } else {\r\n    return \"market\";\r\n  }\r\n}\r\n\r\nfunction itemPrice(results, item, overrides, stack = []) {\r\n  const data = results[item];\r\n  if (data.vendorPrice) {\r\n    return data.vendorPrice;\r\n  }\r\n\r\n  let recursion = false;\r\n  for(const reagent in data.crafting){\r\n    if(stack.includes(reagent)){\r\n      recursion = true;\r\n      break;\r\n    }\r\n  }\r\n\r\n  const mode = overrides[item] || itemDefault(results, item);\r\n  if (!recursion && mode === \"crafting\" && data.crafting) {\r\n    return craftingPrice(results, item, overrides, stack) / data.amountCrafted;\r\n  } else if (data.bindOnPickup) {\r\n    return 0;\r\n  } else {\r\n    return data.marketValue || Infinity;\r\n  }\r\n}\r\n\r\nfunction craftingPrice(results, item, overrides, stack = []) {\r\n  stack.push(item)\r\n\r\n  let total = results[item].requiredMoney\r\n  for(const reagent in results[item].crafting){\r\n    total += itemPrice(results, reagent, overrides, stack) * results[item].crafting[reagent]\r\n  }\r\n\r\n  return total\r\n}\r\n\r\nfunction profLabel(data) {\r\n  if (profNames[data.category]) {\r\n    if (data.amountCrafted !== 1) {\r\n      return <span><span className={\"trade-icon trade-\" + data.category}/>{profNames[data.category]} (per {data.amountCrafted}): </span>;\r\n    } else {\r\n      return <span><span className={\"trade-icon trade-\" + data.category}/>{profNames[data.category]}: </span>;\r\n    }\r\n  } else {\r\n    return \"\";\r\n  }\r\n}\r\n\r\nfunction shoppingList(list, results, item, count, overrides) {\r\n  const mode = overrides[item] || itemDefault(results, item);\r\n  const data = results[item];\r\n  if (data.vendorPrice || !data.crafting || mode !== \"crafting\") {\r\n    list[item] = (list[item] || 0) + count;\r\n  } else {\r\n    const numCraft = Math.ceil(count / data.craftMin);\r\n    Object.entries(data.crafting).forEach(([name, quantity]) => shoppingList(list, results, name, quantity * numCraft, overrides));\r\n    if (data.requiredMoney) {\r\n      list.money = (list.money || 0) + data.requiredMoney;\r\n    }\r\n  }\r\n  return list;\r\n}\r\n\r\nfunction ItemLink({name, data}) {\r\n  if (data.id) {\r\n    return <a className={\"quality-\" + data.quality} href={`https://tbc.wowhead.com/item=${data.id}`} target=\"_blank\" rel=\"noreferrer\">{name}</a>;\r\n  } else {\r\n    return <span className={\"quality-\" + data.quality}>{name}</span>;\r\n  }\r\n}\r\n\r\nfunction ResultView({item, count, ...props}) {\r\n  const {results, overrides, setOverrides, setShopping} = props;\r\n  const setMarket = React.useCallback(() => setOverrides(ov => ({...ov, [item]: \"market\"})), [setOverrides, item]);\r\n  const setCrafting = React.useCallback(() => setOverrides(ov => ({...ov, [item]: \"crafting\"})), [setOverrides, item]);\r\n\r\n  const addShopping = React.useCallback(() => setShopping(s => ({...s, [item]: (s[item] || 0) + 1})), [setShopping, item]);\r\n\r\n  const data = results[item];\r\n  if (!data) return null;\r\n\r\n  let price = null;\r\n  const mode = overrides[item] || itemDefault(results, item);\r\n\r\n  if (data.vendorPrice) {\r\n    price = <React.Fragment>Vendor: <Money value={data.vendorPrice}/></React.Fragment>;\r\n  } else if (!data.marketValue && !data.crafting) {\r\n    price = data.bindOnPickup ? \"Bind on Pickup\" : \"Not available\";\r\n  } else if (data.marketValue || data.craftingPrice != null) {\r\n    const cprice = data.crafting ? craftingPrice(results, item, overrides) : 0;\r\n    if (data.marketValue || cprice) {\r\n      price = (\r\n        <React.Fragment>\r\n          {!!data.marketValue && <span onClick={setMarket} className={mode === \"market\" ? \"active\" : \"inactive\"}>Market{data.faction ? ` (${data.faction})` : \"\"}: <Money value={data.marketValue}/> (quantity: {data.quantity})</span>}\r\n          {!!(data.marketValue && data.crafting) && \" / \"}\r\n          {cprice > 0 && <span onClick={setCrafting} className={mode === \"crafting\" ? \"active\" : \"inactive\"}>{profLabel(data)}<Money value={cprice}/></span>}\r\n        </React.Fragment>\r\n      );\r\n    }\r\n  }\r\n  return (\r\n    <div className=\"item\">\r\n      <div className=\"header\">{!!count && <span className=\"count\">{count}x</span>}<ItemLink name={item} data={data}/>{!!price && \" \"}{!!price && <span className=\"add-list\" onClick={addShopping}>(add)</span>}{!!price && \" - \"}{price}</div>\r\n      {!!(!data.vendorPrice && mode === \"crafting\" && data.crafting) && (\r\n        <div className=\"crafting\">\r\n          {Object.entries(data.crafting).map(([name, quantity]) => <ResultView key={name} item={name} count={quantity} {...props}/>)}\r\n          {!!data.requiredMoney && (\r\n            <div className=\"item\">\r\n              <div className=\"header\">Required Money: <Money value={data.requiredMoney}/></div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ShoppingItem({results, item, count, setShopping}) {\r\n  const onChange = React.useCallback(e => setShopping(list => {\r\n    list = {...list};\r\n    const value = parseInt(e.target.value);\r\n    if (value && !isNaN(value)) {\r\n      list[item] = value;\r\n    } else {\r\n      delete list[item];\r\n    }\r\n    return list;\r\n  }), [item, setShopping]);\r\n\r\n  return <li><input type=\"number\" className=\"task-counter\" value={count} onChange={onChange}/> <ItemLink name={item} data={results[item]}/></li>;\r\n}\r\n\r\nfunction ShoppingList({results, overrides, shopping, setShopping}) {\r\n  const [list, total] = React.useMemo(() => {\r\n    const list = Object.entries(Object.entries(shopping).reduce((list, [item, count]) => shoppingList(list, results, item, count, overrides), {}))\r\n      .filter(([name, count]) => count > 0)\r\n      .map(([name, count]) => {\r\n        if (name === \"money\") {\r\n          return [name, count, count, 4];\r\n        } else {\r\n          const data = results[name];\r\n          if (data.vendorPrice) {\r\n            return [name, count, data.vendorPrice * count, 3];\r\n          } else if (data.bindOnPickup) {\r\n            return [name, count, 0, 0];\r\n          } else if (!data.marketValue) {\r\n            return [name, count, Infinity, 1];\r\n          } else {\r\n            return [name, count, data.marketValue * count, 2];\r\n          }\r\n        }\r\n      });\r\n    const total = list.reduce((cur, [n, c, p, s]) => cur + p, 0);\r\n    list.sort(([n1, c1, p1, s1], [n2, c2, p2, s2]) => (s1 === s2 ? p2 - p1 : s1 - s2));\r\n    return [list, total];\r\n  }, [results, overrides, shopping]);\r\n  const clearList = React.useCallback(() => setShopping({}), [setShopping]);\r\n  if (!Object.keys(shopping).length) {\r\n    return null;\r\n  }\r\n  return (\r\n    <div className=\"shopping-list\">\r\n      <div className=\"header\">Shopping for <span className=\"add-list\" onClick={clearList}>(clear)</span></div>\r\n      <ul>\r\n        {Object.entries(shopping).map(([item, count]) => <ShoppingItem key={item} results={results} item={item} count={shopping[item]} setShopping={setShopping}/>)}\r\n      </ul>\r\n      <div className=\"header\">Items to buy - <Money value={total}/></div>\r\n      <ul>\r\n        {list.map(([name, count]) => {\r\n          if (name === \"money\") {\r\n            return <li>Money: <Money value={count}/></li>\r\n          }\r\n          const data = results[name];\r\n          let price = null;\r\n          if (data.vendorPrice) {\r\n            price = <span>Vendor: <Money value={data.vendorPrice * count}/></span>;\r\n          } else if (!data.marketValue) {\r\n            price = data.bindOnPickup ? \"Bind on Pickup\" : \"Not available\";\r\n          } else {\r\n            price = <span>Market{data.faction ? ` (${data.faction})` : \"\"}: <Money value={data.marketValue * count}/></span>;\r\n          }\r\n          return <li><span className=\"count\">{count}x</span><ItemLink name={name} data={results[name]}/> - {price}</li>;\r\n        })}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function App() {\r\n  const [serverList, setServerList] = React.useState([]);\r\n  React.useEffect(() => {\r\n    serverOptions.then(opt => setServerList(opt));\r\n  }, []);\r\n\r\n  const [server, setServer] = usePersistentState(\"wowcrafting-server\");\r\n  const [faction, setFaction] = usePersistentState(\"wowcrafting-faction\", factionOptions[0]);\r\n  const [item, setItem] = React.useState();\r\n  const [results, setResults] = React.useState();\r\n  const [overrides, setOverrides] = React.useState({});\r\n  const [shopping, setShopping] = React.useState({});\r\n\r\n  const onServerChange = React.useCallback(v => {\r\n    setResults(null);\r\n    setOverrides({});\r\n    setServer(v);\r\n  }, [setServer]);\r\n  const onFactionChange = React.useCallback(v => {\r\n    setResults(null);\r\n    setOverrides({});\r\n    setFaction(v);\r\n  }, [setFaction]);\r\n  const onItemChange = React.useCallback(v => {\r\n    setItem(v);\r\n  }, []);\r\n\r\n  const toCalc = React.useRef();\r\n  React.useEffect(() => {\r\n    if (!server || !faction) return;\r\n    const slug = `${server.value}-${faction.value}`;\r\n    toCalc.current = slug;\r\n    setResults(true);\r\n    calculate(server.value, faction.value).then(data => {\r\n      if (toCalc.current === slug) {\r\n        setResults(data);\r\n      }\r\n    });\r\n  }, [server, faction]);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <div className=\"config\">\r\n        <Select className=\"select-server\" value={server} onChange={onServerChange} options={serverList} placeholder=\"Select server...\"/>\r\n        <Select className=\"select-faction\" value={faction} onChange={onFactionChange} options={factionOptions}/>\r\n        {!!(server && faction) && <AsyncSelect className=\"select-item\" value={item} onChange={onItemChange} loadOptions={itemOptions} noOptionsMessage={() => null} placeholder=\"Select item...\"/>}\r\n      </div>\r\n      {!!(results && item) && (\r\n        <div className=\"Results\">\r\n          {results === true ? (\r\n            <div className=\"calculating\">Calculating...</div>\r\n          ) : (\r\n            <div className=\"results-main\">\r\n              <ResultView results={results} item={item.value} overrides={overrides} setOverrides={setOverrides} shopping={shopping} setShopping={setShopping}/>\r\n            </div>\r\n          )}\r\n          {results !== true && <ShoppingList results={results} overrides={overrides} shopping={shopping} setShopping={setShopping}/>}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './reset.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}