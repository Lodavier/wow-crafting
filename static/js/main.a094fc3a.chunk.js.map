{"version":3,"sources":["nexushub.js","data.js","logic.js","App.js","index.js"],"names":["serverList","fetch","then","r","json","dataCache","loadData","server","faction","slug","Promise","all","alliance","horde","keys","Set","Object","fromEntries","map","key","a","h","quantity","marketValue","Math","min","data","itemId","assign","crafting","quests","process","item","results","Error","info","Data","id","quality","vendor","vendorPrice","category","reagents","requiredMoney","amountCrafted","craftMin","craftMax","craftingPrice","entries","reduce","total","name","bindOnPickup","price","Infinity","filter","x","isNaN","forEach","n","usePersistentState","initialValue","React","useState","window","localStorage","getItem","JSON","parse","error","console","value","setValue","useEffect","setItem","stringify","serverOptions","servers","regions","region","push","label","list","sort","name1","name2","localeCompare","options","factionOptions","profNames","alchemy","blacksmithing","cooking","enchanting","engineering","firstaid","leatherworking","mining","tailoring","categoryNames","quest","tierset","itemOptions","term","callback","length","toLowerCase","categories","includes","cat","Money","isFinite","gold","floor","silver","copper","className","itemDefault","overrides","itemPrice","profLabel","shoppingList","count","mode","numCraft","ceil","money","ItemLink","href","target","rel","ResultView","props","setOverrides","setShopping","setMarket","useCallback","ov","setCrafting","addShopping","s","Fragment","cprice","onClick","ShoppingItem","onChange","e","parseInt","type","ShoppingList","shopping","useMemo","cur","p","p1","s1","p2","s2","clearList","App","setServerList","opt","setServer","setFaction","setResults","onServerChange","v","onFactionChange","onItemChange","toCalc","useRef","current","calculate","placeholder","loadOptions","noOptionsMessage","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a094fc3a.chunk.js","sourcesContent":["export const serverList = fetch('https://api.nexushub.co/wow-classic/v1/servers/full/').then(r => r.json());\r\n\r\nconst dataCache = {};\r\n\r\nfunction merge(a, h) {\r\n  if (a && h) {\r\n    return {quantity: a.quantity + h.quantity, marketValue: Math.min(a.marketValue, h.marketValue), faction: a.marketValue < h.marketValue ? \"alliance\" : \"horde\"};\r\n  } else if (a) {\r\n    return {...a, faction: \"alliance\"};\r\n  } else if (h) {\r\n    return {...h, faction: \"horde\"};\r\n  }\r\n}\r\n\r\nexport function loadData(server, faction) {\r\n  const slug = `${server}-${faction}`;\r\n  if (dataCache[slug]) return dataCache[slug];\r\n  if (faction === \"both\") {\r\n    return dataCache[slug] = Promise.all([loadData(server, \"alliance\"), loadData(server, \"horde\")]).then(([alliance, horde]) => {\r\n      const keys = new Set([...Object.keys(alliance), ...Object.keys(horde)]);\r\n      return Object.fromEntries([...keys].map(key => [key, merge(alliance[key], horde[key])]));\r\n    });\r\n  } else {\r\n    return dataCache[slug] = fetch(`https://api.nexushub.co/wow-classic/v1/items/${slug}/`)\r\n      .then(r => r.json())\r\n      .then(r => Object.fromEntries(r.data.map(({itemId, quantity, marketValue}) => [itemId, {quantity, marketValue}])));\r\n  }\r\n}\r\n","import crafting from './crafting.json';\r\nimport quests from './quests.json';\r\n\r\nObject.assign(crafting, quests);\r\n\r\nexport default crafting;\r\n","import { loadData } from './nexushub';\r\nimport Data from './data';\r\n\r\nexport default async function calculate(server, faction) {\r\n  const data = await loadData(server, faction);\r\n\r\n  const price = r => Math.min(...[r.vendorPrice, r.marketValue, r.craftingPrice, r.bindOnPickup ? 0 : Infinity].filter(x => !isNaN(x)));\r\n\r\n  const results = {};\r\n  function process(item) {\r\n    if (results[item] === \"processing\") throw Error(`cyclical dependency for ${item}`);\r\n    if (!results[item]) {\r\n      const info = Data[item];\r\n      if (!info) {\r\n        throw Error(`item not found: ${item}`);\r\n      }\r\n      const r = results[item] = {};\r\n      r.id = info.id;\r\n      r.quality = info.quality;\r\n      if (info.id && data[info.id]) {\r\n        Object.assign(r, data[info.id]);\r\n      }\r\n      if (info.vendor) {\r\n        r.vendorPrice = info.vendor;\r\n      }\r\n      r.category = info.category;\r\n      if (info.reagents) {\r\n        r.crafting = info.reagents;\r\n        r.requiredMoney = info.requiredMoney || 0;\r\n        r.amountCrafted = ((info.craftMin || 1) + (info.craftMax || 1)) / 2;\r\n        r.craftMin = info.craftMin || 1;\r\n        r.craftingPrice = Object.entries(r.crafting).reduce((total, [name, quantity]) => total + process(name) * quantity, r.requiredMoney) / r.amountCrafted;\r\n      } else if (info.bindOnPickup) {\r\n        r.bindOnPickup = true;\r\n      }\r\n    }\r\n    return price(results[item]);\r\n  }\r\n  Object.keys(Data).forEach(n => process(n));\r\n  return results;\r\n}\r\n","import React from 'react';\r\nimport './App.scss';\r\n\r\nimport Select from 'react-select';\r\nimport AsyncSelect from 'react-select/async';\r\n\r\nimport { serverList } from './nexushub';\r\n\r\nimport Data from './data';\r\nimport calculate from './logic';\r\n\r\nfunction usePersistentState(key, initialValue) {\r\n  const [value, setValue] = React.useState(() => {\r\n    try {\r\n      const item = window.localStorage.getItem(key);\r\n      return item != null ? JSON.parse(item) : initialValue;\r\n    } catch (error) {\r\n      console.error(error);\r\n      return initialValue;\r\n    }\r\n  });\r\n  React.useEffect(() => {\r\n    try {\r\n      window.localStorage.setItem(key, JSON.stringify(value));\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }, [key, value]);\r\n  return [value, setValue];\r\n}\r\n\r\nconst serverOptions = serverList.then(servers => {\r\n  const regions = {};\r\n  servers.forEach(({slug, name, region}) => {\r\n    if (!regions[region]) regions[region] = [];\r\n    regions[region].push({value: slug, label: name});\r\n  });\r\n  return Object.entries(regions).map(([region, list]) => {\r\n    list.sort(({label: name1}, {label: name2}) => name1.localeCompare(name2));\r\n    return {label: region, options: list};\r\n  });\r\n});\r\n\r\nconst factionOptions = [\r\n  {value: \"alliance\", label: \"Alliance\"},\r\n  {value: \"horde\", label: \"Horde\"},\r\n  {value: \"both\", label: \"Both\"},\r\n];\r\n\r\nconst profNames = {\r\n  alchemy: \"Alchemy\", \r\n  blacksmithing: \"Blacksmithing\", \r\n  cooking: \"Cooking\", \r\n  enchanting: \"Enchanting\", \r\n  engineering: \"Engineering\", \r\n  firstaid: \"First Aid\", \r\n  leatherworking: \"Leatherworking\", \r\n  mining: \"Mining\",\r\n  tailoring: \"Tailoring\"\r\n};\r\nconst categoryNames = {...profNames, quest: \"Quests\", tierset: \"Tier Sets\", \"\": \"Misc\"};\r\n\r\nconst itemOptions = (term, callback) => {\r\n  if (term.length < 3) callback([]);\r\n  term = term.toLowerCase();\r\n  const categories = {};\r\n  Object.entries(Data).filter(([name, data]) => data.reagents && name.toLowerCase().includes(term)).forEach(([name, data]) => {\r\n    categories[data.category || \"\"] = (categories[data.category || \"\"] || []);\r\n    categories[data.category || \"\"].push({value: name, label: name});\r\n  });\r\n  callback(Object.entries(categories).map(([cat, list]) => ({label: categoryNames[cat], options: list})));\r\n}\r\n\r\nfunction Money({value}) {\r\n  if (!isFinite(value)) {\r\n    return \"Not available\";\r\n  }\r\n  if (!value) {\r\n    return \"0\";\r\n  }\r\n  const gold = Math.floor(value / 10000);\r\n  const silver = Math.floor(value / 100) % 100;\r\n  const copper = Math.floor(value) % 100;\r\n  return (\r\n    <span>\r\n      {gold !== 0 && <span className=\"money-gold\">{gold}</span>}{gold !== 0 && (silver + copper) !== 0 && \" \"}\r\n      {silver !== 0 && <span className=\"money-silver\">{silver}</span>}{silver !== 0 && copper !== 0 && \" \"}\r\n      {copper !== 0 && <span className=\"money-copper\">{copper}</span>}\r\n    </span>\r\n  );\r\n}\r\n\r\nfunction itemDefault(results, item) {\r\n  const data = results[item];\r\n  if (!data) {\r\n    debugger;\r\n  }\r\n  if (!isNaN(data.craftingPrice) && (!data.marketValue || data.craftingPrice < data.marketValue)) {\r\n    return \"crafting\";\r\n  } else {\r\n    return \"market\";\r\n  }\r\n}\r\n\r\nfunction itemPrice(results, item, overrides) {\r\n  const data = results[item];\r\n  if (data.vendorPrice) {\r\n    return data.vendorPrice;\r\n  }\r\n  const mode = overrides[item] || itemDefault(results, item);\r\n  if (mode === \"crafting\" && data.crafting) {\r\n    return craftingPrice(results, item, overrides) / data.amountCrafted;\r\n  } else if (data.bindOnPickup) {\r\n    return 0;\r\n  } else {\r\n    return data.marketValue || Infinity;\r\n  }\r\n}\r\n\r\nfunction craftingPrice(results, item, overrides) {\r\n  return Object.entries(results[item].crafting).reduce((total, [name, quantity]) => total + itemPrice(results, name, overrides) * quantity, results[item].requiredMoney);\r\n}\r\n\r\nfunction profLabel(data) {\r\n  if (profNames[data.category]) {\r\n    if (data.amountCrafted !== 1) {\r\n      return <span><span className={\"trade-icon trade-\" + data.category}/>{profNames[data.category]} (per {data.amountCrafted}): </span>;\r\n    } else {\r\n      return <span><span className={\"trade-icon trade-\" + data.category}/>{profNames[data.category]}: </span>;\r\n    }\r\n  } else {\r\n    return \"\";\r\n  }\r\n}\r\n\r\nfunction shoppingList(list, results, item, count, overrides) {\r\n  const mode = overrides[item] || itemDefault(results, item);\r\n  const data = results[item];\r\n  if (data.vendorPrice || !data.crafting || mode !== \"crafting\") {\r\n    list[item] = (list[item] || 0) + count;\r\n  } else {\r\n    const numCraft = Math.ceil(count / data.craftMin);\r\n    Object.entries(data.crafting).forEach(([name, quantity]) => shoppingList(list, results, name, quantity * numCraft, overrides));\r\n    if (data.requiredMoney) {\r\n      list.money = (list.money || 0) + data.requiredMoney;\r\n    }\r\n  }\r\n  return list;\r\n}\r\n\r\nfunction ItemLink({name, data}) {\r\n  if (data.id) {\r\n    return <a className={\"quality-\" + data.quality} href={`https://classic.wowhead.com/item=${data.id}`} target=\"_blank\" rel=\"noreferrer\">{name}</a>;\r\n  } else {\r\n    return <span className={\"quality-\" + data.quality}>{name}</span>;\r\n  }\r\n}\r\n\r\nfunction ResultView({item, count, ...props}) {\r\n  const {results, overrides, setOverrides, setShopping} = props;\r\n  const setMarket = React.useCallback(() => setOverrides(ov => ({...ov, [item]: \"market\"})), [setOverrides, item]);\r\n  const setCrafting = React.useCallback(() => setOverrides(ov => ({...ov, [item]: \"crafting\"})), [setOverrides, item]);\r\n\r\n  const addShopping = React.useCallback(() => setShopping(s => ({...s, [item]: (s[item] || 0) + 1})), [setShopping, item]);\r\n\r\n  const data = results[item];\r\n  if (!data) return null;\r\n\r\n  let price = null;\r\n  const mode = overrides[item] || itemDefault(results, item);\r\n\r\n  if (data.vendorPrice) {\r\n    price = <React.Fragment>Vendor: <Money value={data.vendorPrice}/></React.Fragment>;\r\n  } else if (!data.marketValue && !data.crafting) {\r\n    price = data.bindOnPickup ? \"Bind on Pickup\" : \"Not available\";\r\n  } else if (data.marketValue || data.craftingPrice != null) {\r\n    const cprice = data.crafting ? craftingPrice(results, item, overrides) : 0;\r\n    if (data.marketValue || cprice) {\r\n      price = (\r\n        <React.Fragment>\r\n          {!!data.marketValue && <span onClick={setMarket} className={mode === \"market\" ? \"active\" : \"inactive\"}>Market{data.faction ? ` (${data.faction})` : \"\"}: <Money value={data.marketValue}/> (quantity: {data.quantity})</span>}\r\n          {!!(data.marketValue && data.crafting) && \" / \"}\r\n          {cprice > 0 && <span onClick={setCrafting} className={mode === \"crafting\" ? \"active\" : \"inactive\"}>{profLabel(data)}<Money value={cprice}/></span>}\r\n        </React.Fragment>\r\n      );\r\n    }\r\n  }\r\n  return (\r\n    <div className=\"item\">\r\n      <div className=\"header\">{!!count && <span className=\"count\">{count}x</span>}<ItemLink name={item} data={data}/>{!!price && \" \"}{!!price && <span className=\"add-list\" onClick={addShopping}>(add)</span>}{!!price && \" - \"}{price}</div>\r\n      {!!(!data.vendorPrice && mode === \"crafting\" && data.crafting) && (\r\n        <div className=\"crafting\">\r\n          {Object.entries(data.crafting).map(([name, quantity]) => <ResultView key={name} item={name} count={quantity} {...props}/>)}\r\n          {!!data.requiredMoney && (\r\n            <div className=\"item\">\r\n              <div className=\"header\">Required Money: <Money value={data.requiredMoney}/></div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ShoppingItem({results, item, count, setShopping}) {\r\n  const onChange = React.useCallback(e => setShopping(list => {\r\n    list = {...list};\r\n    const value = parseInt(e.target.value);\r\n    if (value && !isNaN(value)) {\r\n      list[item] = value;\r\n    } else {\r\n      delete list[item];\r\n    }\r\n    return list;\r\n  }), [item, setShopping]);\r\n\r\n  return <li><input type=\"number\" className=\"task-counter\" value={count} onChange={onChange}/> <ItemLink name={item} data={results[item]}/></li>;\r\n}\r\n\r\nfunction ShoppingList({results, overrides, shopping, setShopping}) {\r\n  const [list, total] = React.useMemo(() => {\r\n    const list = Object.entries(Object.entries(shopping).reduce((list, [item, count]) => shoppingList(list, results, item, count, overrides), {}))\r\n      .filter(([name, count]) => count > 0)\r\n      .map(([name, count]) => {\r\n        if (name === \"money\") {\r\n          return [name, count, count, 4];\r\n        } else {\r\n          const data = results[name];\r\n          if (data.vendorPrice) {\r\n            return [name, count, data.vendorPrice * count, 3];\r\n          } else if (data.bindOnPickup) {\r\n            return [name, count, 0, 0];\r\n          } else if (!data.marketValue) {\r\n            return [name, count, Infinity, 1];\r\n          } else {\r\n            return [name, count, data.marketValue * count, 2];\r\n          }\r\n        }\r\n      });\r\n    const total = list.reduce((cur, [n, c, p, s]) => cur + p, 0);\r\n    list.sort(([n1, c1, p1, s1], [n2, c2, p2, s2]) => (s1 === s2 ? p2 - p1 : s1 - s2));\r\n    return [list, total];\r\n  }, [results, overrides, shopping]);\r\n  const clearList = React.useCallback(() => setShopping({}), [setShopping]);\r\n  if (!Object.keys(shopping).length) {\r\n    return null;\r\n  }\r\n  return (\r\n    <div className=\"shopping-list\">\r\n      <div className=\"header\">Shopping for <span className=\"add-list\" onClick={clearList}>(clear)</span></div>\r\n      <ul>\r\n        {Object.entries(shopping).map(([item, count]) => <ShoppingItem key={item} results={results} item={item} count={shopping[item]} setShopping={setShopping}/>)}\r\n      </ul>\r\n      <div className=\"header\">Items to buy - <Money value={total}/></div>\r\n      <ul>\r\n        {list.map(([name, count]) => {\r\n          if (name === \"money\") {\r\n            return <li>Money: <Money value={count}/></li>\r\n          }\r\n          const data = results[name];\r\n          let price = null;\r\n          if (data.vendorPrice) {\r\n            price = <span>Vendor: <Money value={data.vendorPrice * count}/></span>;\r\n          } else if (!data.marketValue) {\r\n            price = data.bindOnPickup ? \"Bind on Pickup\" : \"Not available\";\r\n          } else {\r\n            price = <span>Market{data.faction ? ` (${data.faction})` : \"\"}: <Money value={data.marketValue * count}/></span>;\r\n          }\r\n          return <li><span className=\"count\">{count}x</span><ItemLink name={name} data={results[name]}/> - {price}</li>;\r\n        })}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function App() {\r\n  const [serverList, setServerList] = React.useState([]);\r\n  React.useEffect(() => {\r\n    serverOptions.then(opt => setServerList(opt));\r\n  }, []);\r\n\r\n  const [server, setServer] = usePersistentState(\"wowcrafting-server\");\r\n  const [faction, setFaction] = usePersistentState(\"wowcrafting-faction\", factionOptions[0]);\r\n  const [item, setItem] = React.useState();\r\n  const [results, setResults] = React.useState();\r\n  const [overrides, setOverrides] = React.useState({});\r\n  const [shopping, setShopping] = React.useState({});\r\n\r\n  const onServerChange = React.useCallback(v => {\r\n    setResults(null);\r\n    setOverrides({});\r\n    setServer(v);\r\n  }, [setServer]);\r\n  const onFactionChange = React.useCallback(v => {\r\n    setResults(null);\r\n    setOverrides({});\r\n    setFaction(v);\r\n  }, [setFaction]);\r\n  const onItemChange = React.useCallback(v => {\r\n    setItem(v);\r\n  }, []);\r\n\r\n  const toCalc = React.useRef();\r\n  React.useEffect(() => {\r\n    if (!server || !faction) return;\r\n    const slug = `${server.value}-${faction.value}`;\r\n    toCalc.current = slug;\r\n    setResults(true);\r\n    calculate(server.value, faction.value).then(data => {\r\n      if (toCalc.current === slug) {\r\n        setResults(data);\r\n      }\r\n    });\r\n  }, [server, faction]);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <div className=\"config\">\r\n        <Select className=\"select-server\" value={server} onChange={onServerChange} options={serverList} placeholder=\"Select server...\"/>\r\n        <Select className=\"select-faction\" value={faction} onChange={onFactionChange} options={factionOptions}/>\r\n        {!!(server && faction) && <AsyncSelect className=\"select-item\" value={item} onChange={onItemChange} loadOptions={itemOptions} noOptionsMessage={() => null} placeholder=\"Select item...\"/>}\r\n      </div>\r\n      {!!(results && item) && (\r\n        <div className=\"Results\">\r\n          {results === true ? (\r\n            <div className=\"calculating\">Calculating...</div>\r\n          ) : (\r\n            <div className=\"results-main\">\r\n              <ResultView results={results} item={item.value} overrides={overrides} setOverrides={setOverrides} shopping={shopping} setShopping={setShopping}/>\r\n            </div>\r\n          )}\r\n          {results !== true && <ShoppingList results={results} overrides={overrides} shopping={shopping} setShopping={setShopping}/>}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './reset.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}